<div class="result title pl-0 sm:ml-3 " >
    <sort-list ></sort-list>
    <div class="table-responsive-sm" >
        <div class="spinner_row" ng-show="titleSearching">
            <i class="spinner fa fa-spinner fa-pulse"></i>
        </div>
        <table id="table" class="table w-full table-fixed">

            <tr ng-show="!titleSearching && !titleModel[listType].length">
                <td>Inga träffar. </td>
            </tr>
            <tr class="work_link" 
                ng-repeat="row in titleModel[listType]" 
                on-finish-render="titleRender()"
                ng-class="{'first' : $first, header: row.isHeader}"
                ng-click="toggleDownload(row, true)"
                >
                <td ng-if="row.isHeader" class="type_header">
                    <h3  class="row_title part_header">{{row.label}}</h3>
                </td>
                <!-- <td class="w-6" ng-if="dl_mode && !row.isHeader">
                    <input class="" type="checkbox" ng-model="row._download" ng-change="toggleDownload(row, false)" ng-click="$event.stopPropagation()">
                </td> -->
                <td class="title_col" ng-if="!row.isHeader" >

                    <div class="whitespace-no-wrap">
                        <input ng-if="dl_mode" class="mr-2" type="checkbox" ng-model="row._download" ng-change="toggleDownload(row, false)" ng-click="$event.stopPropagation()">
                        <div 
                         top="$parent.title_off" 
                         ng-click="!dl_mode && titleClick($event, row)"
                         id="{{getUniqId(row)}}"
                         class="header_container inline-block align-middle">
                        <div class="header">
                            <span class="title_inner" tooltip="{{row.title != row.shorttitle ? row.title : ''}}" tooltip-popup-delay="500" >
                                <a ng-if="listType == 'works'" ng-click="titleHeaderClick($event, row)">{{row.shorttitle || row.title}} </a>
                                <a ng-if="listType == 'epub'" 
                                   ng-href="/txt/epub/{{row.main_author.author_id + '_' + (row.work_title_id || row.title_id)}}.epub" target="_self" download>{{row.shorttitle || row.title}} </a>
                            </span>
                            
                            
                        </div>
                    </div>
                    <div ng-if="listType == 'works'" collapse="!row._collapsed">
                        <div class="collapse-content" >
                            <ul class="links">
                                <li ng-repeat="mediatype in row | readMediatypes">
                                    <a ng-href="{{mediatype.url}}">Läs som {{mediatype.label}}</a>
                                </li>
                                <li ng-repeat="mediatype in row | downloadMediatypes">
                                    <a ng-href="{{mediatype.url}}" target="_self">Ladda ner {{mediatype.label}}</a>
                                </li>
                                
                                <li ng-show="::row.searchable">
                                    <a ng-href="/sok?forfattare={{row.authors[0].author_id}}&titlar={{row.lbworkid}}&avancerad">Gör en sökning i verket</a>
                                </li>
                                
                                <li ng-show="hasMediatype(row, 'etext') || hasMediatype(row, 'faksimil')">
                                    <a ng-href="{{row.mediatypes[0].url + '/?om-boken'}}">Läs mer om verket</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div></td>

                <td class="align-top text-left hidden sm:table-cell w-16 whitespace-no-wrap"><span>{{row.sort_date.plain}}</span></td>
                <td class="align-top text-right"><span class="author">
                            <a ng-href="/forfattare/{{row.main_author.author_id}}">{{row.main_author.surname}}</a> 
                            <span ng-if="row.main_author.type == 'editor'">(red.)</span> 
                            <span ng-if="row.main_author.type == 'illustrator'">(ill.)</span>
                        </span> <!-- ng-click="authorClick($event, authorsById[row.author[0].author_id])" --></td>

            </tr>

        </table>
        <div ng-show="!titleModel['show_all_' + listType] && titleModel[listType + '_hits'] > 30">
            <button class="btn btn-sm show_all"
            ng-class="'show_all_' + listType"  ng-click="(titleModel['show_all_' + listType] = true) && fetchWorks(false, listType == 'epub')">
                Visa alla <span class="num">{{titleModel[listType + '_hits']}}</span> träffar
            </button>
        </div>
    </div>
</div>
