<meta-desc>Sök i Litteraturbanken verk</meta-desc>
<div ng-class="{searching:searching}">
    <div class="preloader">Söker <span class="dots_blink"></span></div>
    <div class="header">
        <h1>Sök i texten</h1>
        <a class="open_toggle" ng-click="open = !open">
            <em ng-show="!open">visa sökalternativ >></em>
            <em ng-show="open">&lt;&lt; dölj sökalternativ</em>
    
    
        </a>
        <div style="clear:both;"></div>
    </div>
    
    
    <form ng-submit="search()">
        Ord eller fras: <input class="input" ng-model="query" autofocus>
    </form>
    
    <div class="extended" ng-show="open">
        <h3>Urval</h3>
        <div class="columns">
            <div class="left">
                <label for="author_select">Författare</label>
                <select id="author_select"
                        ng-model="selected_author"
                        ng-change="authorChange()"
                        ng-options="author.nameforindex for author in authors | filter:{searchable : 'true'}" >
                    <option value="">Alla författare</option>
                </select>
            </div>
            <div class="right">
                <label for="title_select">Titel: (välj författare först)</label>
                <select id="title_select" 
                        ng-model="selected_title" 
                        ng-change="titleChange()"
                        ng-options="title.showtitle for title in titles | filter:{searchable: 'true'} | filter: checkProof | orderBy:'showtitle' ">
    
                    <option value="">Allt tillgängligt</option>
                </select>
            </div>
        </div>
        <div class="chks">
            Sök i:
            <input id="yes" type="radio" ng-model="proofread" value="yes">
            <label for="yes" ng-click="proofread = 'yes'">korrekturläst</label>
            <input id="no" type="radio" ng-model="proofread" value="no">
            <label for="no" ng-click="proofread = 'no'">ej korrekturläst</label>
            <input id="all" type="radio" ng-model="proofread" value="all">
            <label for="all" ng-click="proofread = 'all'">allt</label>
        </div>
    </div>
    
    <div><span ng-click="search()" submit-btn></span><div style="clear:both;"></div></div>
    
    
    
    <div class="n_pages">Visa
        <select id="num_hits" ng-model="num_hits" ng-change="current_page = 0"
            ng-options="num for num in [10, 20, 50, 100, 250, 500]" ng-change="search(query)">
        </select>
        träffar per sida.
    </div>
    
    <div>
        <div ng-if="kwic && !kwic.length && !hits">Din sökning gav inga träffar</div>
        
          <table cellspacing="0" class="results">
            <tr bindonce ng-repeat="sent in kwic" ng-class="{even : $even, odd : $odd, is_faksimil : sent.structs.text_mediatype == 'faksimil'}" class="sentence">
                <td class="num">{{($index + 1) + (current_page * num_hits)}}</td>
                <td><a bo-text="sent.structs.text_nameforindex" 
                    href="/#!/forfattare/{{getSetVal(sent, 'text_authorid')}}"></a></td>
                <td class="title">
                    <a bo-text="sent.structs.text_shorttitle" 
                    href="/#!/forfattare/{{getSetVal(sent, 'text_authorid')}}/titlar/{{sent.structs.text_titlepath}}/{{sent.structs.text_mediatype}}"></a>
                </td>

                <td class="left_context"><span kwic-word="kwic-word" ng-repeat="wd in selectLeft(sent)"></span></td>
                <td class="match">
                    <a bo-href="sent.href">
                        <strong><span kwic-word="kwic-word" ng-repeat="wd in selectMatch(sent)"></span></strong>
                    </a>
                </td>
                <td class="right_context"><span kwic-word="kwic-word" ng-repeat="wd in selectRight(sent)"></span></td>
            </tr>
          </table>


    <div toolkit>
        <hr>

        <div class="littb_pager" ng-show="kwic && hits">
            <div ng-if="hits > num_hits">
                Visar {{current_page  * num_hits + 1}}-{{(current_page  * num_hits) + kwic.length}} av 
                {{hits}} träffar,
                sida {{current_page + 1}} av {{total_pages}}.

                <div class="ctrl">
                    <a ng-click="firstPage()"><img src="bilder/LBstart.png"></a>
                    <a ng-click="prevPage()"><img src="bilder/LBforegaende.png"></a>
                    <a ng-click="nextPage()"><img src="bilder/LBnasta.png"></a>
                    <a ng-click="lastPage()"><img src="bilder/LBslut.png"></a>
                </div>
            
                <label>Gå till träffsida</label>
                <form ng-submit="current_page = input_page - 1; search()">
                    <input class="input_page" ng-model="input_page"><span ng-click="current_page = input_page - 1; search()" submit-btn></span>
                </form>
            </div>
            
            <div ng-if="hits <= num_hits">
                Visar alla {{hits}} träffar.
            </div>
        </div>

        <p>Du kan välja att söka i verk av alla författare som finns i Litteraturbanken eller bara en viss författare. Om du väljer en viss författare kan du dessutom välja att söka antingen i samtliga verk av den författaren, eller i ett enstaka verk. Det går också att välja om man vill söka i korrekturläst eller ej korrekturläst text. I träfflistan visas träffar i icke korrekturlästa texter med grå text.</p>
    </div>
    <!-- -->
</div>