<meta-desc>Blädda bland Litteraturbankens författare och titlar.</meta-desc>
<h1>Botanisera i biblioteket</h1> <!-- samlingarna -->
<!--  <span class="star">*</span> <span class="smaller">ENKEL SÖKNING</span> -->
<!-- <img bkg-img src="img/sok_moln.jpg"></img> -->
<div ng-class="{searching:searching}">
    <div id="controls">
        <form class="row" ng-submit="searchTitle()">
            
            <div class="">
                <div class="row main_input">
                    <input class="filter_input" autofocus 
                        ng-model-options='{debounce : {default : 200, blur : 0}, updateOn: "default blur"}' 
                        type="text" 
                        ng-model="filter" 
                        placeholder="Skriv författarnamn eller titel">
                    <button class="submit btn">Sök</button>
                </div>
                <div class="row title_select_container">
                    <select  class="gender_select" 
                             ui-select2="{minimumResultsForSearch: -1}" 
                             ng-model="filters['main_author.gender']" 
                             data-placeholder="Välj kön" >
                        <option value=""></option>
                        <option value="all">Alla författare</option>
                        <option value="female">Kvinnliga författare</option>    
                        <option value="male">Manliga författare</option>
                    </select>
                </div>
                <div class="row title_select_container">
                    <select multiple class="filter_select keyword_select" ui-select2 ui-select2="{placeholder: 'Välj samling'}" ng-model="filters.keywords" data-placeholder="Välj samling" >
                        <option value=""></option>
                        <option value="texttype:brev">Brev</option>
                        <option value="texttype:drama">Dramatik</option>
                        <option value="texttype:novellsamling;novell">Noveller</option>
                        <option value="texttype:diktsamling;dikt">Poesi</option>
                        <option value="texttype:roman">Romaner</option>
                        <option value='keyword:Barnlitteratur'>Barn- och ungdomslitteratur</option>
                        <option value='keyword:Finlandssvenskt'>Finlandssvensk litteratur</option>
                        <option value='keyword:Humor'>Humor</option>
                        <option value='keyword:Folktryck'>Skillingtryck och folktryck</option>
                        <option value="texttype:reseskildring">Reseskildringar</option>
                        <option value='keyword:Dramawebben'>Dramawebben</option>
                        <option value='keyword:SLS-FI'>SLS Finland</option>
                        <option value='provenance.library:SVELITT'>SLS Sverige</option>
                        <option value='provenance.library:SVS'>Svenska vitterhetssamfundet</option>
                        <option value='keyword:sentpajorden'>Sent på jorden</option>
                        <option value='keyword:OrdenPrövas'>Orden prövas. Harry Martinson</option>
                    </select>
                </div>
                <div class="row title_select_container about_container">
                    <select multiple class="filter_select about_select"
                            ui-select2 
                            ng-model="filters.authorkeyword" 
                            data-placeholder="Om ett författarskap" 
                            ng-change="onAboutAuthorChange($event)">

                        <option value=""></option>
                        <option value='{{authorid}}' ng-repeat="authorid in aboutAuthors">{{authorsById[authorid].full_name}}</option>
                    </select>
                </div>

                <!-- <div class="row auth_select_container">
                    <select class="filter_select author_select" ui-select2="sortSelectSetup" ng-model="sort" data-placeholder="Sortering" ng-change="" >
                        <option value=""></option>
                        <option value="popularity|desc">Popularitet</option>
                        <option value="sortkey|asc">Titel</option>
                    </select> 
                </div> -->
                
                <div class="row more" ng-class="{show_more : show_more}"><a ng-click="show_more = !show_more" ><i class="fa fa-caret-right"></i> Visa fler inställningar </a></div>

                <div class="more_container" ng-class="{show_more : show_more}" ng-show="show_more">
                    <div class="row title_select_container">
                        <select multiple class="filter_select keyword_select" ui-select2 ng-model="filters.mediatypes" data-placeholder="Utgivningsformat" >
                            <option value=""></option>
                            <option value="mediatype:etext">Etext</option>
                            <option value="mediatype:faksimil">Faksimil</option>
                            <option value="has_epub:true">Epub</option>
                            <option value="mediatype:pdf">PDF</option>
                        </select>
                    </div>
                    <div class="row title_select_container">
                        <select multiple class="filter_select keyword_select" ui-select2 ng-model="filters.languages" data-placeholder="Språk …">
                            <option value=""></option>
                            <option value="modernized:true">Moderniserat språk</option>
                            <option value="modernized:false">Ej moderniserat språk</option>
                            <option value="proofread:true">Korrekturläst</option>
                            <option value="proofread:false">Ej korrekturläst</option>
                            <option value="language:swe">Svenska</option>
                            <option value="language:eng">Engelska</option>
                            <option value="language:deu">Tyska</option>
                            <option value="language:fra">Franska</option>
                            <option value="language:lat">Latin</option>
                            <!-- <option value="">Skrivet av kvinnor</option>
                            <option value="">Skrivet av män</option> -->


                        </select>
                    </div>
                </div>
            </div>
        </form>
        
        <!-- <div class="row box_container"> -->
        <div class="row box" >

            <div class="btn-group p-0 mb-10 ">
                <label class="sc btn btn-small" 
                    ng-model="listType" btn-radio="'works'" ng-click="listType = 'works'">
                    Verk <span class="num_hits" ng-show="titleArray.length">({{titleArray.length}})</span>
                </label>
                <label class="sc btn btn-small" 
                    ng-model="listType" btn-radio="'authors'" ng-click="listType = 'authors'">
                    Författare <span class="num_hits">({{getAuthorData().length}})</span>
                </label>
                <label class="sc btn btn-small" 
                    ng-model="listType" btn-radio="'parts'" ng-click="listType = 'parts'">Dikter, noveller, essäer, etc. <span class="num_hits" ng-show="parts_hits">({{ parts_hits }})</span></label>
                <label class="sc btn btn-small" 
                    ng-model="listType" btn-radio="'audio'" ng-click="listType = 'audio'">Ljud & bild <span class="num_hits" ng-show="audio_list.length">({{audio_list.length}})</span></label>
            </div>
            
            <div class="result col-12 author pl-0 sm:ml-3" ng-if="listType == 'authors'">

                <div class=""> 
                    <ul class="">
                        <li class="spinner_row" ng-show="authorSearching">
                            <i class="spinner fa fa-spinner fa-pulse"></i>
                        </li>
                        <!-- <li class="part_header top_header" ng-show="authorData.length">
                            
                            <a class="popular"
                                ng-show="showInitial"
                                ng-disabled="showPopularAuth"
                                ng-click="showPopularAuth = true">Populära författare</a> 
                            <a class="works" 
                                ng-show="showInitial" 
                                ng-disabled="!showPopularAuth"  ng-click="showPopularAuth = false">Alla Författare</a>

                            <a class="filtered" ng-show="!showInitial">Författare</a>
                            <a class="reset" ng-show="!showInitial" ng-click="resetView()">återställ</a>
                        </li> -->
                        <li ng-show="!authorSearching && !(getAuthorData()).length">
                            Inga träffar.
                        </li>

                        <li ng-repeat="author in getAuthorData() | limitTo: rowLimit track by author.author_id"
                            ng-click="authorClick($event, author)" 
                            on-finish-render="authorRender()" 
                            id="{{author.author_id}}">
                            <a ng-href="/forfattare/{{author.author_id}}/" class="item_header" >
                                <span class="surname">{{author.name_for_index.split(',')[0]}}</span>
                                <span ng-show="author.name_for_index.split(',').length > 1">,</span> 
                                {{author.name_for_index.split(",")[1]}} {{author | authorYear}}
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="result col-12 title pl-0 sm:ml-3 " ng-if="listType == 'works'">
                <div class="table-responsive-sm" >
                    <table id="table" class="table w-full">
                        <tr class="spinner_row" ng-show="titleSearching">
                            <td>
                                <i class="spinner fa fa-spinner fa-pulse"></i>
                            </td>
                        </tr>

                        
                    
                        <!-- <tr class="part_header top_header" ng-hide="titleSearching">
                            <a class="popular"
                                ng-show="showInitial"
                                ng-disabled="showPopular"
                                ng-click="popClick()">Populära verk</a> 
                            <a class="recent"
                                ng-show="showInitial"
                                ng-disabled="showRecent"
                                ng-click="fetchRecent()">Nytillkomna verk</a> 
                            <a class="works" 
                                ng-show="showInitial" 
                                ng-disabled="!(showPopular || showRecent)"  ng-click="showAllWorks()">Samtliga verk</a>
                            <a class="filtered" ng-show="!showInitial">Hela verk</a>
                            <a class="reset" ng-show="!showInitial" ng-click="resetView()">återställ</a>
                        </li> -->

                        <tr ng-show="!titleSearching && !listVisibleTitles().length">
                            <td>Inga träffar. </td>
                        </tr>
                        <!-- orderBy | 'sortkey' -->
                        <tr class="work_link" 
                            ng-repeat="row in listVisibleTitles() | limitTo: rowLimit" 
                            on-finish-render="titleRender()"
                            ng-class="{'first' : $first}"
                            >
                            <td ng-if="row.isHeader">
                                <h3  class="row_title part_header">{{row.label}}</h3>
                            </td>
                            <td ng-if="!row.isHeader" >
                                <div 
                                 top="$parent.title_off" 
                                 ng-click="titleClick($event, row)"
                                 id="{{getUniqId(row)}}">
                                <div class="header">
                                    <span class="title" tooltip="{{row.title != row.shorttitle ? row.title : ''}}" tooltip-popup-delay="500" >
                                        <a ng-click="titleHeaderClick($event, row)" >{{row.shorttitle || row.title}} </a>
                                    </span>
                                    
                                    
                                </div>
                                <div collapse="!row._collapsed">
                                    <div class="collapse-content">
                                        <ul class="links">
                                            <li ng-repeat="mediatype in row | readMediatypes">
                                                <a ng-href="{{mediatype.url}}">Läs som {{mediatype.label}}</a>
                                            </li>
                                            <li ng-repeat="mediatype in row | downloadMediatypes">
                                                <a ng-href="{{mediatype.url}}" target="_self">Ladda ner {{mediatype.label}}</a>
                                            </li>
                                            
                                            <li ng-show="::row.searchable">
                                                <a ng-href="/sok?forfattare={{row.authors[0].author_id}}&titlar={{row.lbworkid}}&avancerad">Gör en sökning i verket</a>
                                            </li>
                                            
                                            <li ng-show="hasMediatype(row, 'etext') || hasMediatype(row, 'faksimil')">
                                                <a ng-href="{{row.mediatypes[0].url + '/?om-boken'}}">Läs mer om verket</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div></td>

                            <td class="align-top text-right"><span>{{row.sort_date.plain}}</span></td>
                            <td class="align-top text-right"><span class="author">
                                        <a ng-href="/forfattare/{{row.authors[0].author_id}}">{{row.authors[0].surname}}</a> 
                                        <span ng-if="row.authors[0].authortype == 'editor'">(red.)</span> 
                                        <span ng-if="row.authors[0].authortype == 'illustrator'">(ill.)</span>
                                    </span> <!-- ng-click="authorClick($event, authorsById[row.author[0].author_id])" --></td>

                        </tr>
                        
                        
                    </table>
                </div>
            </div>

            <div class="result col-12 title pl-0 sm:ml-3" ng-if="listType == 'audio'">
                <!-- <li class="part_header audio" ng-hide="showInitial || !audio_list.length">
                    Ur ljudarkivet
                </li> -->
                <table class="table w-full">
                    <tr ng-repeat="row in audio_list" class="parts" ng-class="{first_audio : $first, last_audio : $last}">
                    
                        <!-- <div class="header" > -->
                        <td tooltip="{{row.title}}" class="title">
                            <a ng-href="/ljudarkivet?spela={{row.file}}">
                            {{row.shorttitle}}
                            </a>
                        </td>
                        
                        <td class="author text-right">
                            <a ng-click="authorClick($event, authorsById[row.authors[0].author_id])">{{getPartAuthor(row).surname}}</a> 
                            <span ng-if="getPartAuthor(row).authortype == 'editor'">(red.)</span>
                            <span ng-if="getPartAuthor(row).authortype == 'illustrator'">(ill.)</span>
                        </td>
                        <!-- </div> -->
                    </li>
                    
                </table>
            </div>
            <div class="result col-12 title pl-0 sm:ml-3" ng-if="listType == 'parts'">

                <div class="table-responsive-sm">
                    <table class="table">
                        <tr class="" ng-show="!showInitial && !partSearching && !all_titles.length">
                            <td>Inga träffar.</td>
                        </tr>
                        
                        <tr ng-repeat="row in all_titles" class="parts" ng-class="{first_part : $first}">
                        
                            <!-- <div class="header" tooltip="{{::row.title != row.shorttitle ? row.title : ''}}" tooltip-popup-delay="500"> -->
                                <td class="title" tooltip="{{::row.title != row.shorttitle ? row.title : ''}}">
                                    <a ng-href="/forfattare/{{row.work_authors[0].author_id}}/titlar/{{row.work_title_id}}/sida/{{row.startpagename}}/{{row.mediatype}}">
                                    {{row.shorttitle || row.title}}
                                    </a>
                                </td>
                                <td class=" text-right">{{row.sort_date.plain}}</td>
                                <td class="author text-right">
                                    <a ng-href="/forfattare/{{row.work_authors[0].author_id}}">{{getPartAuthor(row).surname}}</a> 
                                    <span ng-if="getPartAuthor(row).authortype == 'editor'">(red.)</span>
                                    <span ng-if="getPartAuthor(row).authortype == 'illustrator'">(ill.)</span>
                                </td>
                            <!-- </div> -->
                        </tr>
                        <tr ng-show="!showAllParts && parts_hits > 30">
                            <td>
                                <button class="btn btn-sm show_all"  ng-click="(showAllParts = true) && fetchParts()">
                                    Visa alla <span class="num">{{parts_hits}}</span> träffar
                                </button>
                            </td>
                        </tr>
                    </table>
                </div>

            </div>

        </div>
        
    </div>

</div>

