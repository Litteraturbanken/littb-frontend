<div ng-class="{searching:searching}">
    <div class="preloader">Hämtar <span class="dots_blink"></span></div>
    <div id="controls" ng-hide="searching">
        <select ng-model="authorFilter" ng-change="selectedLetter = null"
            ng-options="author.nameforindex for author in authorData | orderBy:'nameforindex'">
            <option value="">Alla författare</option>
        </select>
        <select ng-model="workFilter" ng-change="selectWork()">
            <option value="works">Samtliga verk</option>
            <option value="titles">Samtliga titlar</option>
        </select>
        <select ng-model="mediatypeFilter" ng-change="selectedLetter = null" >
            <option value="">-- Mediatyper --</option>
            <option value="etext">Etext</option>
            <option value="faksimil">Faksimil</option>
            <option value="epub">Epub</option>
            <option value="pdf">PDF</option>
        </select>
        <!-- <input ng-show="workFilter == 'works'" class="filter_input" type="text" ng-model="filter" placeholder="Filtrera verk" ng-change="selectedLetter = null"> -->
        <form ng-submit="searchTitle()">
            <input class="filter_input" type="text" ng-model="filter" placeholder="Sök titlar"><span ng-click="searchTitle()" submit-btn></span>
        </form>

        

    </div>
    <table id="table" class="contenttable" ng-hide="searching">
        <thead>
            <th> <div sort-triangles val="{{titlesort}}" tuple="sorttuple"></div> </th>
            <th> <div sort-triangles val="author.nameforindex" tuple="sorttuple"></div> </th>
            <th></th>
        </thead>
        <tr ng-repeat="row in getSource() | orderBy:sorttuple[0]:sorttuple[1] | filter:{'itemAttrs.title' : workFilter == 'works' && (rowfilter || ''), mediatype : mediatypeFilter || '', 'author.authorid' : authorFilter.authorid}">
            <td class="title">
                <a  tooltip="{{getTitleTooltip(row.itemAttrs)}}" 
                    href="#!/forfattare/{{row.author.workauthor || row.author.authorid}}/titlar/{{getTitleId(row)}}/info">{{row.itemAttrs.showtitle}}</a>
                    <span class="dots"></span>
            </td>
            <td><a href="#!/forfattare/{{row.author.authorid}}">{{row.author.surname}}</a> <span ng-if="row.author.authortype == 'editor'">(red.)</span></td>
            <td>
                <span ng-repeat="type in row.mediatype">

                    <span ng-show="!$first">:::</span>
                    <a href="#!/forfattare/{{row.author.workauthor || row.author.authorid}}/titlar/{{getTitleId(row)}}/{{type}}">{{type}}</a>
                </span>
            </td>
        </tr>
    </table>


    <div toolkit>
        <hr>
        <div letter-map letter-map-change="letterChange()" selected="selectedLetter" enabled-letters="currentLetters"></div>
        <hr>
        <p>
            Det här är en alfabetisk lista över alla de titlar som Litteraturbanken har att erbjuda, med länkar till text, faksimil- eller pdf-versioner av verken. – Samtliga verk visar titlar på hela verk. Samtliga titlar inkluderar titlar på dikter, noveller etc.
        </p>

    </div>
    <!-- -->
</div>

