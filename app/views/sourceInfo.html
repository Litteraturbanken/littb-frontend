<page-title>{{getValidAuthors() | formatAuthors:authorById}} – {{data.title}}. Om boken</page-title>
<meta-desc>{{getValidAuthors() | formatAuthors:authorById}} – {{data.title}}. Om boken</meta-desc>
<div class="maincontent" ng-class="{searching:!workinfo}" ng-controller="sourceInfoCtrl">
    <div ng-show="loading" class="preloader">Hämtar <span class="dots_blink"></span></div>
    <div ng-if="error" class="error">Ett fel har uppstått.</div>

    <div class="header header_left">
        <h2 class="author sc" ng-bind-html="getValidAuthors() | formatAuthors:authorById:true | trust"></h2>
        <h2 class="title"><span>{{workinfo.title}}</span></h2>
    </div>
    <!-- <div class="header_right" >
    </div>
 -->
    <!-- <div class="large_img" ng-class="{visible : show_large}">


        <img ng-show="workinfo.lbworkid && show_large" ng-src="txt/{{workinfo.lbworkid}}/{{workinfo.lbworkid}}_large.jpeg">
        <div class="cover"></div>
    </div> -->
    {{workinfo.title}}
    <div class="columns">
        <div class="col_left">
            <p class="sourcedesc" ng-bind-html="workinfo.sourcedesc | trust"></p>
            <div class="sourcedescauthor">{{authorById[workinfo.sourcedescAuthor].full_name}}</div>
            
            <div ng-show="workinfo.mediatype" class="mediatypes" ng-class="{bold : workinfo.workintro}">
                Läs verket som <a class="sc" ng-href="{{workinfo.mediatypes[0].url}}">{{workinfo.mediatypes[0].label}}</a>
                <span ng-show="getReadMediatypes().length > 1">
                    eller <a class="sc" ng-href="{{getReadMediatypes()[1].url}}">{{getReadMediatypes()[1].label}}</a>
                </span>
            </div>
            <div ng-show="workinfo.mediatypes.length > 1" class="mediatypes_also">
                Ladda ner 
                <a class="sc" ng-href="{{getDownloadMediatypes()[0].url}}"
                ng-click="downloadFile(getDownloadMediatypes()[0].url)">{{getDownloadMediatypes()[0].label}}</a> <!-- ({{getFileSize(getDownloadMediatypes()[0])}}) -->
                <span ng-show="getDownloadMediatypes().length > 1">
                    eller <a class="sc" ng-href="{{getDownloadMediatypes()[1].url}}"
                    ng-click="downloadFile(getDownloadMediatypes()[1].url)">{{getDownloadMediatypes()[1].label}}</a> <!-- ({{getFileSize(getDownloadMediatypes()[1])}}) -->
                </span>
            </div>
        </div>
        <div class="col_right">
            <img ng-show="workinfo.lbworkid" ng-src="{{getSourceImage()}}" ng-click="showLargeImage($event)" onerror="this.style.display = 'none';" >
        </div>
    </div>
    
    <p class="workintro" ng-bind-html="workinfo.workintro | trust"></p>
    
    <div class="provenance" ng-repeat="prov in provenanceData">
        <a ng-href="{{prov.link}}" ng-if="prov.image"><img ng-src="red/bilder/gemensamt/{{prov.image}}"></a>
        <p>{{prov.text}}</p>
    </div>

    <!-- <div ng-repeat="prov in workinfo.provenance track by $index" class="provenance">
        <a ng-href="{{prov.link}}" ng-if="prov.image"><img ng-src="red/bilder/gemensamt/{{prov.image}}"></a>
        <p>{{prov.text}}</p>
    </div> -->

    <!-- onerror="this.style.visibility = 'hidden'" -->
    
    <div class="license" ng-bind-html="licenseData | correctLink | trust"></div>
    
    <div class="errata" ng-show="mediatype == 'etext'">
        <div class="header" ng-show="workinfo.errata.length">I {{mediatype}}en har följande ändringar gjorts mot originalet:</div>
        <div ng-show="!workinfo.errata">Inga ändringar har gjorts mot orginalet.</div>
        <table class="errata_table">
            <tr ng-repeat="tup in workinfo.errata | limitTo:errataLimit">
                <td>{{tup[0]}}</td>
                <td ng-bind-html="tup[1] | trust"></td>
            </tr>
        </table>
        <a class="toggle sc" ng-click="toggleErrata()" ng-show="!isOpen && workinfo.errata.length > defaultErrataLimit">Visa fler</a>
        <a class="toggle sc" ng-click="toggleErrata()" ng-show="isOpen">Visa färre</a>
    </div>

    <!-- <div class="pull-right lower_cover">
        <img src="/txt/{{workinfo.lbworkid}}/cover_small.png" alt="">
    </div> -->
    <div class="clearfix"></div>
</div>

<!-- <div toolkit>
    <hr>
    <span ng-bind-html="getValidAuthors() | formatAuthors:authorById:true | trust"></span>
    <div><em><a ng-href="/#!/forfattare/{{author}}/titlar/{{workinfo.titlepathNorm.split('/')[0]}}/{{workinfo.mediatypes[0]}}">{{workinfo.shorttitle || workinfo.showtitle || workinfo.title}}</a></em></div>
</div> -->